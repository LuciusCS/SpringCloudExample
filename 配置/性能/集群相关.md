



各个中间件的集群，客户端通过什么方式进行连接

比如： Mysql 集群
      Redis集群 
      RabbitMQ集群
      Nacos集群
      Elasticsearch集群
      Nginx集群
      xxl-job集群
      sentinel集群
      Druid需要集群吗


常用中间件集群 & 客户端连接方式对照表


| 类型            | 中间件            | 集群方式                  | 客户端连接方式                                        | 避免单点方法                              |
| ------------- | -------------- | --------------------- | ---------------------------------------------- | ----------------------------------- |
| **数据库**       | MySQL          | 主从 / InnoDB Cluster   | **MySQL Router / ProxySQL**                    | Router/Proxy 自动路由、剔除故障节点            |
|               | PostgreSQL     | 主从 / Patroni          | **PgBouncer / Pgpool-II**                      | 中间件实现主从切换 & 负载均衡                    |
|               | MongoDB        | ReplicaSet / Sharding | **多节点连接字符串**（`host1,host2,...`）                | 驱动自动发现主从，failover                   |
|               | ClickHouse     | 分布式集群                 | JDBC/HTTP 配置多个节点                               | 建议前置 LB 或 DNS 轮询                    |
| **缓存 / KV**   | Redis          | Sentinel / Cluster    | - Sentinel 模式：客户端感知主从切换<br>- Cluster 模式：直连多个节点 | Sentinel 自动切换主库 / Cluster 自动路由 slot |
|               | Etcd           | Raft 集群               | 配置多个 endpoint                                  | 客户端自动切换；多数派存活                       |
| **消息队列**      | RabbitMQ       | 多节点集群                 | 客户端配置多个节点 / LB                                 | 镜像队列 / Quorum queue 保证消息高可用         |
|               | Kafka          | Broker 集群             | 配置多个 broker（`bootstrap.servers`）               | 客户端自动发现 leader，broker 挂了会选主         |
| **注册 / 配置中心** | Nacos          | 多节点集群                 | 客户端配置多个地址（`ip1:8848,ip2:8848`）                 | SDK 内置负载均衡                          |
|               | Zookeeper      | Quorum 集群             | 客户端配置多个 zk 节点                                  | 客户端自动重试，ZK 选主                       |
|               | Consul         | Raft 集群               | 客户端配置多个 Server 地址                              | 自动 leader 选举                        |
| **搜索 / 分析**   | Elasticsearch  | 分布式节点                 | 客户端配置多个节点地址                                    | SDK 自动探测节点 / 前置 LB                  |
| **网关 / 负载均衡** | Nginx          | 多节点集群                 | 客户端只连 LB 入口                                    | 上层 LB（LVS/SLB）剔除故障节点                |
| **任务调度**      | XXL-Job        | 多 admin 节点            | Executor 配置多个调度中心地址                            | SDK 内置 failover                     |
| **监控 / 限流**   | Sentinel       | 多机部署                  | 客户端直连本地规则 / 配置中心推送                             | 本地限流，不依赖单点；配置中心保证规则可用               |
| **连接池**       | Druid          | 本地池                   | 连接数据库代理（如 MySQL Router）                        | 自身无集群，依赖数据库集群                       |
| **大数据 / 计算**  | Hadoop HDFS    | NN + DN               | 客户端配置多个 NN 地址                                  | Active/Standby NN，自动切换              |
|               | Spark          | Master + Worker       | Driver 配置多个 master 地址                          | ZK 协助 master HA                     |
| **对象存储**      | MinIO          | 分布式节点                 | S3 SDK 配置多个节点 / LB                             | MinIO 内部纠删码容错，LB 提供统一入口             |
| **K8s 控制面**   | K8s API Server | 多副本                   | 客户端连 VIP 或 LB 地址                               | LB (HAProxy/SLB) 保证高可用              |
