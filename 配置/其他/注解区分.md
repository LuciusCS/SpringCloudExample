

## `org.springframework.transaction.annotation.Transactional` 与`jakarta.transaction.Transactional` 之间的区别

特性 / 注解	  org.springframework.transaction.annotation.Transactional	   jakarta.transaction.Transactional
来源	                                Spring                                      Jakarta EE / Java EE
支持的事务属性	完整（propagation、isolation、timeout、rollbackFor 等）     	精简（TxType、rollbackOn 等）
推荐用于	                Spring Boot / Spring Framework 项目	                Java EE / Jakarta EE 容器
AOP 代理支持	                ✔️	                                                    ❌ 不支持 Spring AOP
与 Spring 集成         	✔️ 原生支持                                                 	⚠️ 有限支持
可用性（功能强大性）          	高	                                                         较低


在 Spring 项目中，请始终使用

`import org.springframework.transaction.annotation.Transactional;`



## 避免注解混用


| 注解名              | Jakarta 来源（`jakarta.inject.*`）或 `jakarta.annotation.*` | Spring 来源（`org.springframework.*`）                       | 推荐使用（Spring 项目）             |
| ---------------- | ------------------------------------------------------ | -------------------------------------------------------- | --------------------------- |
| `@Inject`        | `jakarta.inject.Inject`                                | `org.springframework.beans.factory.annotation.Autowired` | ✅ Spring (`@Autowired`)     |
| `@Named`         | `jakarta.inject.Named`                                 | `org.springframework.beans.factory.annotation.Qualifier` | ✅ Spring (`@Qualifier`)     |
| `@Singleton`     | `jakarta.inject.Singleton`                             | `@Scope("singleton")` + `@Component`                     | ✅ Spring (`@Component`)     |
| `@PostConstruct` | `jakarta.annotation.PostConstruct`                     | ❌（Spring 支持，但非 Spring 原生）                                | ✅ Jakarta，但可用构造注入           |
| `@PreDestroy`    | `jakarta.annotation.PreDestroy`                        | ❌                                                        | ✅ Jakarta，但可用 Spring 生命周期接口 |

| 注解名               | Jakarta 来源 (jakarta.validation.*)           | Spring 包含转发         | 推荐使用 |
|---------------------|----------------------------------------------|------------------------|
| @NotNull             jakarta.validation.constraints.NotNull         | ✅ Spring 支持转发     | ✅ 使用 Jakarta |
| @Valid              | jakarta.validation.Valid                      | ✅ Spring 支持         | ✅ 使用 Jakarta |
| @Validated          | ❌无             | org.springframework.validation.annotation.Validated | ✅ 用 Spring 处理分组校验 |

✅ 校验注解一般用 Jakarta 的 jakarta.validation.constraints.*，结合 Spring 的 @Validated 使用。

| 注解                                         | 来源                                                       | 是否 Spring 原生 | 是否推荐在 Spring 中使用     | 说明                                |
| ------------------------------------------ | -------------------------------------------------------- | ------------ | -------------------- | --------------------------------- |
| `@Autowired`                               | `org.springframework.beans.factory.annotation.Autowired` | ✔️ 是         | ✅ **推荐使用**           | 按类型注入，可配合 `@Qualifier` 指定名称       |
| `@Resource`                                | `jakarta.annotation.Resource`                            | ❌ 否          | ⚠️ 可用，但不推荐           | 按名称注入，支持 JSR-250                  |
| `@Inject`                                  | `jakarta.inject.Inject`                                  | ❌ 否          | ⚠️ 可用，但功能较弱          | 按类型注入，类似 `@Autowired`，无扩展功能       |
| `@Qualifier`                               | `org.springframework.beans.factory.annotation.Qualifier` | ✔️ 是         | ✅ 配合 `@Autowired` 使用 | 用于指定 Bean 名称，解决多个同类型 Bean 冲突      |
| `@Value`                                   | `org.springframework.beans.factory.annotation.Value`     | ✔️ 是         | ✅ 注入配置值              | 注入 application.properties 中的值或表达式 |
| `@Component`                               | `org.springframework.stereotype.Component`               | ✔️ 是         | ✅ 注册 Bean            | 用于标记类为组件                          |
| `@Service` / `@Repository` / `@Controller` | Spring 派生注解                                              | ✔️ 是         | ✅ 表示不同角色的组件          | 语义明确，便于分层管理                       |



| 注解           | 用途                 | 推荐等级（Spring 项目） |
| ------------ | ------------------ | --------------- |
| `@Autowired` | 主力依赖注入工具           | ⭐⭐⭐⭐⭐（强烈推荐）     |
| `@Qualifier` | 指定名称（配合 Autowired） | ⭐⭐⭐⭐            |
| `@Resource`  | JSR-250 规范，按名称注入   | ⭐⭐（兼容用）         |
| `@Inject`    | JSR-330 规范，按类型注入   | ⭐⭐（不推荐扩展性差）     |
| `@Value`     | 配置值注入              | ⭐⭐⭐⭐（常用）        |


## 总结推荐原则（Spring 项目中）：
### 🔹 使用 Spring 注解 的场景：
事务控制：@Transactional — 用 Spring 的
依赖注入：@Autowired, @Qualifier, @Value, @Component, @Service, @Repository, @Controller
事件监听：@EventListener
配置类：@Configuration, @Bean, @PropertySource, @Profile
AOP相关：@Aspect, @Around, @Before, @After, @AfterReturning, @AfterThrowing
验证：@Validated（配合 jakarta.validation 的 @NotNull 等）
### 🔸 使用 Jakarta 注解 的场景（主要是 JPA）：
实体类映射（ORM）：
@Entity, @Table, @Column, @Id, @GeneratedValue, @ManyToOne, @JoinColumn, 等等
生命周期（如 @PostConstruct、@PreDestroy）可保留，但 Spring 推荐用构造函数注入



## @Controller vs. @RestController 的核心区别

| 特性                     | `@Controller`                               | `@RestController`                                        |
| ---------------------- | ------------------------------------------- | -------------------------------------------------------- |
| 注解来源                   | `org.springframework.stereotype.Controller` | `org.springframework.web.bind.annotation.RestController` |
| 默认返回行为                 | 返回视图名称（JSP/Thymeleaf 等）                     | 返回 JSON / XML（即响应体）                                      |
| 是否自动添加 `@ResponseBody` | ❌ 需要手动加                                     | ✅ 自动加到所有方法                                               |
| 典型用途                   | 页面渲染（Web 前端、模板引擎）                           | 提供 REST API、JSON 接口                                      |
| 使用视图解析器（ViewResolver）  | ✅ 是                                         | ❌ 否                                                      |


使用 @Controller 的情况：
```
@Controller
public class PageController {

    @GetMapping("/home")
    public String home(Model model) {
        model.addAttribute("user", "Lucius");
        return "home";  // 跳转到 home.html 或 home.jsp
    }
}

```

使用 @RestController 的情况：

```
@RestController
public class ApiController {

    @GetMapping("/api/user")
    public UserDTO getUser() {
        return new UserDTO("lucius", 30);
    }
}
```


