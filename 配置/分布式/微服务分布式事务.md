


### 来自 ChatGPT

现在微服务架构中，已经不再强调强一致性的分布式事务（如 JTA），而是更加关注：

✅ 主流替代方案：最终一致性 + 本地事务 + 异步通信
1. 本地事务 + 事件驱动架构（EDA）

每个微服务只管理自己的数据库，用本地事务（如 Spring 的 @Transactional）。
服务间用消息系统（如 Kafka、RabbitMQ）异步通信，确保最终一致性。
🧩 举例：

用户服务更新完信息后，发送事件到 Kafka，订单服务异步消费这个事件进行处理，而不是通过一个全局事务包住它们。
2. Saga 模式

将一个大事务拆成多个本地事务，通过一系列步骤实现业务逻辑。
每一步成功后继续下一步，失败时通过补偿操作回滚之前的步骤。
🛠 工具支持：

Orchestration（编排式）：由一个协调器控制流程（如 Camunda、Temporal）
Choreography（协同式）：服务之间通过事件通知驱动（常见于 Kafka）
3. 消息队列

Kafka、RabbitMQ、Pulsar、Azure Event Hub 等。
用于解耦服务之间的直接调用，提升容错和吞吐能力。
4. 分布式事务协调器（如果一定要）

一些框架仍然提供类似 JTA 的功能，但适配微服务环境，比如：
Seata（蚂蚁金服开源）
适用于 Dubbo/Spring Cloud 架构，支持 AT（自动补偿事务）、TCC 等模式。
ByteTCC / Hmily（基于 TCC 设计）
Narayana（Red Hat，支持 JTA + Saga）
但这些都不是主流选择，除非你真的有很强一致性需求。


# 数据库方面的趋势
微服务中每个服务通常使用独立数据库（polyglot persistence），所以后面可能不需要使用分布式协调器
常见选型：
关系型数据库：PostgreSQL、MySQL、MariaDB
NewSQL：CockroachDB、TiDB（具备分布式一致性能力）
NoSQL/DBaaS：MongoDB、DynamoDB（不支持传统事务）