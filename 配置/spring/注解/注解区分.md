

## `org.springframework.transaction.annotation.Transactional` 与`jakarta.transaction.Transactional` 之间的区别

特性 / 注解	  org.springframework.transaction.annotation.Transactional	   jakarta.transaction.Transactional
来源	                                Spring                                      Jakarta EE / Java EE
支持的事务属性	完整（propagation、isolation、timeout、rollbackFor 等）     	精简（TxType、rollbackOn 等）
推荐用于	                Spring Boot / Spring Framework 项目	                Java EE / Jakarta EE 容器
AOP 代理支持	                ✔️	                                                    ❌ 不支持 Spring AOP
与 Spring 集成         	✔️ 原生支持                                                 	⚠️ 有限支持
可用性（功能强大性）          	高	                                                         较低


在 Spring 项目中，请始终使用

`import org.springframework.transaction.annotation.Transactional;`



## 避免注解混用


| 注解名              | Jakarta 来源（`jakarta.inject.*`）或 `jakarta.annotation.*` | Spring 来源（`org.springframework.*`）                       | 推荐使用（Spring 项目）             |
| ---------------- | ------------------------------------------------------ | -------------------------------------------------------- | --------------------------- |
| `@Inject`        | `jakarta.inject.Inject`                                | `org.springframework.beans.factory.annotation.Autowired` | ✅ Spring (`@Autowired`)     |
| `@Named`         | `jakarta.inject.Named`                                 | `org.springframework.beans.factory.annotation.Qualifier` | ✅ Spring (`@Qualifier`)     |
| `@Singleton`     | `jakarta.inject.Singleton`                             | `@Scope("singleton")` + `@Component`                     | ✅ Spring (`@Component`)     |
| `@PostConstruct` | `jakarta.annotation.PostConstruct`                     | ❌（Spring 支持，但非 Spring 原生）                                | ✅ Jakarta，但可用构造注入           |
| `@PreDestroy`    | `jakarta.annotation.PreDestroy`                        | ❌                                                        | ✅ Jakarta，但可用 Spring 生命周期接口 |

| 注解名               | Jakarta 来源 (jakarta.validation.*)           | Spring 包含转发         | 推荐使用 |
|---------------------|----------------------------------------------|------------------------|
| @NotNull             jakarta.validation.constraints.NotNull         | ✅ Spring 支持转发     | ✅ 使用 Jakarta |
| @Valid              | jakarta.validation.Valid                      | ✅ Spring 支持         | ✅ 使用 Jakarta |
| @Validated          | ❌无             | org.springframework.validation.annotation.Validated | ✅ 用 Spring 处理分组校验 |

✅ 校验注解一般用 Jakarta 的 jakarta.validation.constraints.*，结合 Spring 的 @Validated 使用。

| 注解                                         | 来源                                                       | 是否 Spring 原生 | 是否推荐在 Spring 中使用     | 说明                                |
| ------------------------------------------ | -------------------------------------------------------- | ------------ | -------------------- | --------------------------------- |
| `@Autowired`                               | `org.springframework.beans.factory.annotation.Autowired` | ✔️ 是         | ✅ **推荐使用**           | 按类型注入，可配合 `@Qualifier` 指定名称       |
| `@Resource`                                | `jakarta.annotation.Resource`                            | ❌ 否          | ⚠️ 可用，但不推荐           | 按名称注入，支持 JSR-250                  |
| `@Inject`                                  | `jakarta.inject.Inject`                                  | ❌ 否          | ⚠️ 可用，但功能较弱          | 按类型注入，类似 `@Autowired`，无扩展功能       |
| `@Qualifier`                               | `org.springframework.beans.factory.annotation.Qualifier` | ✔️ 是         | ✅ 配合 `@Autowired` 使用 | 用于指定 Bean 名称，解决多个同类型 Bean 冲突      |
| `@Value`                                   | `org.springframework.beans.factory.annotation.Value`     | ✔️ 是         | ✅ 注入配置值              | 注入 application.properties 中的值或表达式 |
| `@Component`                               | `org.springframework.stereotype.Component`               | ✔️ 是         | ✅ 注册 Bean            | 用于标记类为组件                          |
| `@Service` / `@Repository` / `@Controller` | Spring 派生注解                                              | ✔️ 是         | ✅ 表示不同角色的组件          | 语义明确，便于分层管理                       |



| 注解           | 用途                 | 推荐等级（Spring 项目） |
| ------------ | ------------------ | --------------- |
| `@Autowired` | 主力依赖注入工具           | ⭐⭐⭐⭐⭐（强烈推荐）     |
| `@Qualifier` | 指定名称（配合 Autowired） | ⭐⭐⭐⭐            |
| `@Resource`  | JSR-250 规范，按名称注入   | ⭐⭐（兼容用）         |
| `@Inject`    | JSR-330 规范，按类型注入   | ⭐⭐（不推荐扩展性差）     |
| `@Value`     | 配置值注入              | ⭐⭐⭐⭐（常用）        |


## 总结推荐原则（Spring 项目中）：
### 🔹 使用 Spring 注解 的场景：
事务控制：@Transactional — 用 Spring 的
依赖注入：@Autowired, @Qualifier, @Value, @Component, @Service, @Repository, @Controller
事件监听：@EventListener
配置类：@Configuration, @Bean, @PropertySource, @Profile
AOP相关：@Aspect, @Around, @Before, @After, @AfterReturning, @AfterThrowing
验证：@Validated（配合 jakarta.validation 的 @NotNull 等）
### 🔸 使用 Jakarta 注解 的场景（主要是 JPA）：
实体类映射（ORM）：
@Entity, @Table, @Column, @Id, @GeneratedValue, @ManyToOne, @JoinColumn, 等等
生命周期（如 @PostConstruct、@PreDestroy）可保留，但 Spring 推荐用构造函数注入



## @Controller vs. @RestController 的核心区别

| 特性                     | `@Controller`                               | `@RestController`                                        |
| ---------------------- | ------------------------------------------- | -------------------------------------------------------- |
| 注解来源                   | `org.springframework.stereotype.Controller` | `org.springframework.web.bind.annotation.RestController` |
| 默认返回行为                 | 返回视图名称（JSP/Thymeleaf 等）                     | 返回 JSON / XML（即响应体）                                      |
| 是否自动添加 `@ResponseBody` | ❌ 需要手动加                                     | ✅ 自动加到所有方法                                               |
| 典型用途                   | 页面渲染（Web 前端、模板引擎）                           | 提供 REST API、JSON 接口                                      |
| 使用视图解析器（ViewResolver）  | ✅ 是                                         | ❌ 否                                                      |


使用 @Controller 的情况：
```
@Controller
public class PageController {

    @GetMapping("/home")
    public String home(Model model) {
        model.addAttribute("user", "Lucius");
        return "home";  // 跳转到 home.html 或 home.jsp
    }
}

```

使用 @RestController 的情况：

```
@RestController
public class ApiController {

    @GetMapping("/api/user")
    public UserDTO getUser() {
        return new UserDTO("lucius", 30);
    }
}
```




import jakarta.persistence.Id; 和 import org.springframework.data.annotation.Id; 区分

| **特性**                     | **`@Id` (来自 `jakarta.persistence`)**                              | **`@Id` (来自 `org.springframework.data.annotation`)**           |
| -------------------------- | ----------------------------------------------------------------- | -------------------------------------------------------------- |
| **使用场景**                   | 用于 **JPA**（Java Persistence API）中，表示实体类的主键字段，通常用于关系型数据库（如 MySQL）。 | 用于 **Spring Data** 中，表示主键字段，通常用于非关系型数据库（如 MongoDB）。            |
| **数据库类型**                  | 主要用于 **关系型数据库**（如 MySQL, PostgreSQL 等）                            | 主要用于 **非关系型数据库**（如 MongoDB, Redis 等）                           |
| **依赖库**                    | 依赖于 JPA 实现（如 Hibernate），需要 **`jakarta.persistence`** API。         | 依赖于 Spring Data 项目（如 `spring-data-mongodb`、`spring-data-jpa`）。 |
| **注解来源**                   | `jakarta.persistence.Id`                                          | `org.springframework.data.annotation.Id`                       |
| **适用对象**                   | **JPA 实体类**，通常与数据库表字段映射                                           | **Spring Data** 中的 **实体类**，通常与数据库文档（如 MongoDB）映射               |
| **典型示例**                   | `@Entity` + `@Id` 结合使用，标识 JPA 实体类的主键字段                            | 用于标识 MongoDB 文档（或其他 NoSQL 数据库）的主键字段                            |
| **持久化框架**                  | **JPA（Hibernate）**                                                | **Spring Data（如 MongoDB）**                                     |
| **是否依赖于数据库表/列映射**          | 依赖数据库表的映射，主键字段对应数据库中的列                                            | 依赖于 MongoDB 等数据库的文档模型，主键字段对应数据库中的文档 ID                         |
| **示例代码**                   | \`\`\`java                                                        | \`\`\`java                                                     |
|                            | @Entity                                                           | public class User {                                            |
|                            | public class User {                                               | @Id                                                            |
|                            | @Id                                                               | private String id;                                             |
|                            | private Long id;                                                  | private String name;                                           |
|                            | private String name;                                              | // getters and setters                                         |
|                            | }                                                                 | }                                                              |
| **JPA / Spring Data 配合使用** | 配合 **JPA** 框架进行数据持久化，通常与关系型数据库一起使用                                | 配合 **Spring Data** 框架进行数据持久化，通常与 NoSQL 数据库一起使用                 |

总结：
如果你的应用是基于 关系型数据库 且使用 JPA，你应该使用 jakarta.persistence.Id。
如果你的应用是基于 Spring Data 和 非关系型数据库（如 MongoDB、Cassandra 等），你应该使用 org.springframework.data.annotation.Id。